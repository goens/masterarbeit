In this chapter we will introduce the basic notions of difference algebra. These definitions and basic concepts are indispensable for the rest of the thesis. 
The aim of this chapter is to be complete for reader who has no knowledge of difference algebra, but is familiar with algebra and algebraic geometry. 
The two standard textbooks in the field which were most used for this thesis are the works of Cohn \cite{cohn} and Levin \cite{levin}. 
A reader who has interest in a more thorough treatment of the subject should look into any of the two. While Cohn is perhaps more accessible and easier to read, 
it has a notation that might be consider cumbersome by some modern standards. The textbook by Levin also considers a more general setting by working with partial difference equations, which are also not treated in this thesis.
Additionaly, a reader might find M.Wibmers lecture notes on difference algebra \cite{wibmer} useful for reading this thesis, since it resembles them the most in the way the subjects are structured.

\subsection{Introduction to Difference Algebra} 


Difference algebra is a small branch of mathematics, whose origin is closely related to that of differential algebra: a larger field with which it bears great similarity. It is also a relatively new field.
It could be argued that difference algebra was born as a branch of mathematics around the 1930s through a series of articles published by J. Ritt between 1929 and 1939. However, it was not until the 1950s thanks to R. Cohn 
that difference algebra reached levels of development comparable to those of differential algebra.  Since then it has enjoyed a satisfactory growth thanks to a large number of mathematicians, and although it remains a small field today,
it still has many important results and a solid structure as a theory. A more detailed historical review of the origin of difference algebra can be found in the preface of \cite{levin}, which this one is based on.



To give a first idea of the objects of study of difference algebra, we will start off with a few examples of difference equations. Probably one of the best known examples comes from the Fibonacci sequence: $1,1,2,3,5,8,13,\ldots$, which can be seen as a solution of the following recursive equation:
\begin{align*}
a_0 = 1,  a_1 = 1, \\ a_n = a_{n-1} + a_{n-2}, n\geq 2.
\end{align*}

Another example that probably any mathematician or physicist will know is the functional equation of the $\Gamma$-function:

\begin{align*}
\Gamma(x+1) = x \Gamma(x).
\end{align*}

A classical result in complex analysis states that any function which satisfies this equation is a multiple of the $\Gamma$-function,
which is considered a generalization of the factorial. An integral representation of the $\Gamma$-function is given by
\begin{align*}
\Gamma(x) = \int_0^\infty{\frac{t^x}{t} e^{-t} dt}.
\end{align*}

These are two notable examples of difference equations, as we will soon see. In difference algebra, however, we do not seek to find 'explicit' solutions of these equations,
 as are the numbers in the Fibonacci sequence or the integral representation of the $\Gamma$-function. We will seek to study the structure of these equations and tackle problems like the existence of solutions in a more abstract sense.

\subsection{Basics of Difference Algebra}\label{fundamentos}
\begin{defn}
Let  $R$ be a ring (in this thesis all rings will be commutative and unital), and let
 $\sigma: R \rightarrow R$ be an endomorphism of rings in $R$. Then we call the tuple $(R,\sigma)$ a \emph{difference ring}, or $\sigma$\emph{-ring}. \index{$\s$-ring} \\
By abuse of notation we will say that $R$ is a $\sigma$-ring  to refer to the pair, and if $R'$ is a further $\sigma$-ring, we will also use the symbol $\sigma$ for the endomorphism on $R'$; This should not lead to confusion, since it can be inferred from the context which endomorphism is meant. 
\end{defn}

\begin{defn}
Let $R, R'$ be  $\sigma$-rings and let $\varphi: R \rightarrow R'$ be a morphism of rings. We say that $\varphi$ is a \emph{morphism of $\sigma$-rings}  if \index{moprhism of $\sigma$-rings}
\begin{align*}
\sigma(\varphi(r)) = \varphi(\sigma(r)) \fa r \in R
\end{align*}
\end{defn}

\begin{ex} A few of the more notable examples of $\s$-rings are the following:

\begin{itemize}
\item Every ring $R$ is a $\sigma$-ring with $\sigma = \Id_R$. We call this a \emph{constant $\s$-ring}.  \index{constant $\s$-ring}
\item The field of meromorphic functions $\C \rightarrow \C$, which we will denote by $\mathcal{M}$,
is a $\sigma$-ring with $\sigma(f)(x) = f(x+1)$ for every $x \in \C, ~ f \in \mathcal{M}$.
Similarly, for $q \in \C, ~ |q| = 1$, the mapping $\s(f)(x) := f(qx)$ also defines a $\s$-ring structure on $\mathcal{M}$.
\item The sequences of integers, which we will denote by $\text{Seq}(\Z)$, are a $\sigma$-ring with the operation of shifting its terms to the left:
\begin{align*} \sigma: (a_n)_{n \in \N} \mapsto (a_{n+1})_{n \in \N}. \end{align*}
\end{itemize}
\end{ex}

\begin{defn}
Let $R$ be a $\sigma$-ring. If $R$ is also a field, we call the pair $(R,\sigma)$ a $\sigma$\emph{-field}. \index{$\s$-field} 
If $k$ is a $\sigma$-field, $A$ a $\s$-ring, and we have a morphism of rings $\varphi \colon k \rightarrow A$ such that $\varphi \sigma = \sigma \varphi$
 then we call $A$ a $k$-$\sigma$\emph{-algebra}. \index{$k$-$\sigma$-algebra} In this case we can also consider $A$ as a $k$-algebra via $\varphi$.
\end{defn}

\begin{ex}\label{polynomialrings}
Let $k$ be a $\s$-field. We consider the polynomial ring in infinitely many variables $R:= k[y_1,\sigma(y_1),\sigma^2(y_1),\ldots]$,
 where $y_1,\sigma(y_1),\sigma^2(y_1),\ldots$ are, for the moment at least, simply the names of (algebraically independent) variables.
This ring we can turn into a $k$-$\sigma$-algebra by defining:
\begin{align*} 
\sigma:  R \rightarrow R, y_1 \mapsto \sigma(y_1), \sigma^{n-1}(y_1) \mapsto \sigma^{n}(y_1) \fa n > 1 
\end{align*}
and extending this mapping in the obvious way. 
\end{ex}

\begin{defn}
The $\s$-ring defined in Example~\ref{polynomialrings}  is called a $\sigma$\emph{-polynomial ring}. \index{$\sigma$-polynomial ring}
We denote this $\sigma$-polynomial ring by $k\{y_1\}$. In an analogous fashion we can define $\sigma$-polynomial rings $k\{y_1, \ldots, y_n \} =: k\{y\}$ in many variables. \\
We will use the shorthand notation $y = y_1,\ldots,y_n$ throughout the thesis.
\end{defn}

FIXME(!!): define order and effective order here!

\begin{defn} $\phantom{}$
\begin{itemize}
\item Given a $\sigma$-ring $S$ and a subring $R \leq S$, we say that $R$ is a $\sigma$\emph{-subring} \index{$\s$-subring} of $S$ if $(R,\sigma|_{R})$ is a $\sigma$-ring,
i.e. , if the image of $\sigma|_{R}$ is contained in $R$.
\item Let $R$ be a $\s$-ring. A $\sigma$\emph{-ideal} \index{$\s$-ideal} is an ideal $I \unlhd R$ which is closed under $\sigma$. This means that $\sigma(I) \subseteq I$. We will use the notation $I \si R$ for this. In this case, there exists a canonical $\sigma$-ring structure on the quotient ring $R/I$:
\begin{align*} \sigma: R/I \rightarrow R/I, a + I \mapsto \sigma(a) + I. \end{align*}
\end{itemize}
\end{defn}

A useful way of working with difference ideals is to consider a difference-algebraic concept of genearting sets.

\begin{defn}
Let $R$ be a $\s$-ring and let  $\a \si R$ be a $\s$-ideal of $R$. Let $a_j \in R$ for all $ j \in J$, where $J$ is an index set. We use $[a_j \mid j \in J]$ to denote the $\s$-ideal minimal (with respect to inclusion) of $R$ which contains all $a_j$ for $j \in J$. In fact, it holds that \[[a_j \mid j \in J] = \left\{ \sum_{i=1}^n \s^{r_i}(x_i) \mid n \geq 0, r_i \geq 0, x_i \in \{a_j, \mid j \in J \}, i=1,\ldots,n \right\}. \] 
If there exist $b_1,\ldots,b_r \in \a$ such that $\a = [b_j \mid j \in \{1,\ldots r \}] =: [b_1,\ldots,b_r]$,
 we say that $\a$ is \emph{finitely $\s$-generated} as a $\s$-ideal \index{finitely $\s$-generated $\s$-ideal}
\end{defn}

\indent There are numerous properties in which we are interested for studying difference ideals. For the scope of this thesis, the most important ones are the following:
\begin{defn}
Let  $\a \si R$ be a $\s$-ideal of $R$. 
\begin{itemize}
\item Then $\a$ is called a \emph{mixed $\s$-ideal} if for any $f,g \in R$ with $fg \in \a$ it follows that $f \sigma(g) \in \a$. \index{mixed $\s$-ideal}
\item $\a$ is called \emph{perfect}, if $\sigma^{i_1}(f) \cdots \sigma^{i_n}(f) \in \a$ implies that $f \in \a$, where $n \in \NE, i_j \in \N \fa j \in \n$. \index{perfect $\s$-ideal}
\item $\a$ is called \emph{reflexive}, if $\s(f) \in \a$ implies $f \in \a$. \index{reflexive $\s$-ideal}
\item $\a$ is called \emph{$\s$-prime}, if $\a$ is a prime, reflexive $\s$-ideal. \index{$\s$-prime}
\item The ring $R$ is called \emph{well-mixed}, if the zero ideal $[0]$ is mixed, and \emph{perfectly $\s$-reduced}, if it is perfect. \index{well-mixed $\s$-ring}\index{perfectly $\s$-reduced $\s$-ring}
\end{itemize}
\end{defn}

Similar to $\s$-generators of ideals, we can define generators as a $k$-$\s$-algebra.

\begin{defn}
A $k$-$\sigma$-algebra  $A$ is \emph{finitely $\sigma$-generated} if there exist elements $f_1, \ldots, f_n$ such that $$A = k[f_1,f_2,\ldots,f_n,\sigma(f_1),\ldots,\sigma(f_n),\sigma^2(f_1),\ldots].$$
We write  $k\{f_1, \ldots, f_n\}$ to denote the  $\sigma$-algebra generated by $f_1, \ldots, f_n$.
\end{defn}

\begin{rem}\label{epipoli}
If $A$ is a $k$-$\sigma$-algebra, $\sigma$-generated by $f_1, \ldots, f_n$, then we have a canonical epimorphism of $k$-$\sigma$-algebras from the $\sigma$-polynomial ring $k\{y_1, \ldots, y_n \}$ to $A$: $y_i \mapsto f_i, i = 1, \ldots, n$. We thus see that $\sigma$-polynomial rings are free objects in the category of finitely generated $k$-$\sigma$-algebras. 
\end{rem}

\begin{defn}
If the kernel $I$ of the epimorphism mentioned on Remark \ref{epipoli} is finitely $\s$-generated as well, say, by $r_1, \ldots, r_m$, then we call the algebra $A$ \emph{finitely $\sigma$-presented}. \index{finitely $\sigma$-presented}
\end{defn}

\begin{rem}
In the conditions of the previous definition, by the fundamental theorem on homomorphisms we have $A \cong k\{y_1, \ldots, y_n\}/[r_1,\ldots,r_m]$. Note as well that the concepts ``finitely $\sigma$-generated'' and ``finitely $\sigma$-presented'' are truly different, contrary to the case of polynomial rings over fields where we can argue with the Hilbert basis theorem. This difference can be seen in the next example.
\end{rem}

\begin{ex}
Let $k$ be a $\sigma$-field and let $I \si k\{y\} $ be the $\sigma$-ideal $\s$-generated by $y\s(y), y\s^2(y), y\s^3(y), \ldots$, i.e., $I = [y \s^i(y) \mid i\geq 1]$. Then the $\sigma$-ring $R := k\{y\}/I$ (where $\s (r + I) := \s(r) + I)$ is 
finitely $\sigma$-generated, $R = k\{ y + I \}$, but not finitely $\sigma$-presented, since $I$ is not finitely $\sigma$-generated.
\end{ex}


We can now return to the examples fro the begining of this chapter, as we now have the necessary concepts to formulate these in the language of difference algebra. 

\begin{ex}
The Fibonacci sequence is a solution to the $\s$-polynomial $\sigma^2(y) + \sigma(y) - y$ in the $\sigma$-ring  $\text{Seq}(\Z)$; this is precisely the recurrence relation $a_{n+2} + a_{n+1} = a_n$.
In the same way, the $\Gamma$-function is the solution to the $\s$-polynomial $\sigma(y) - zy$, where $z \in \C(z)$ denotes the identity function $z \mapsto z$ in the $\s$-ring $\mathcal{M} \supset \C(z).$
\end{ex}

\subsection{Perfect Difference Ideals And Difference Varieties}

The purpose of this section is to present in a compact fashion some well-known results of difference algebra, mainly about the geometric aspects of perfect difference ideals. 
The rest of the thesis will then go on and generalize many of these results to the case of mixed ideals. For the sake of compactness, the results will be stated without proof.
Similarly, many of the examples or remarks that give a more in-depth understanding of said results will be deferred to the later sections of the thesis. 
They will be presented algonside the corresponding generalizations of these results.

\begin{defn}
Let $R$ be a $\s$-ring and $F \subset R$ be a $\s$-ideal of $R$. The smallest (with respect to inclusion) prefect $\s$-ideal containing $F$ is called the \emph{perfect closure of $F$}\index{perfect closure} and we will write $\{F\}$ to denote it. 
\end{defn}

Perfect difference ideals will play a role similar to that of radical ideals in algebraic geometry. In fact, in the case of a constant $\s$-ring the definition of perfect difference ideals corresponds to radical ideals. Most of the following results can be easily recognized as generalizations of standard results in algebraic geometry. 

\begin{theorem}
Let $R$ be a $\s$-ring and $F \subseteq R$ be a subset of $R$. Then we can write the perfect closure of $F$ as follows:
\begin{equation}\label{perfectintersection} \{F\} = \bigcap_{\substack{F \subseteq \p \si R, \\ \p ~ \s\text{-prime}}} \p \end{equation}
\begin{proof} See Proposition 2.3.4 of \cite{levin} \end{proof}
\end{theorem}

If a difference ring $R$ satisfies the ascending chain condition for perfect difference ideals, we say that $R$ is a \emph{Ritt difference ring}\index{Ritt difference ring}.
A much stronger version of the previous fact can actually be proven for this  particular class of difference Rings, Ritt difference rings.  Consider a Ritt difference Ring $R$ and a perfect difference ideal $\a \si R$. 
For a decomposition of $\a$ as in Equation \ref{perfectintersection}, let $$\a = \{ \a \} = \bigcap_{i \in I} \p_i,$$ where $I$ is an index set and $\p_i$ a $\s$-prime difference ideal of $R$ for all $i \in I$.
For a subset $J \subseteq I$ such that $$ \a = \bigcap_{i \in J} \p_i$$ we say that $J$ is an \emph{irredundant decomposition of $\a$}\index{irredundant decomposition of a perfect $\s$-ideal}
if $p_i \not \subseteq p_j$ for all $i \neq j.$

It can be shown that in a Ritt difference ring there is a unique finite irredundant decomposition in $\s$-prime ideals for every perfect difference ideal. See, for example, Theorem 2.5.7 of \cite{levin}. 

Ritt difference ideals are of particular interest as, in a way, they fulfill some of the roles played by noetherian rings in the standard results of algebraic geometry/commutative algebra.
In particular, a result analogous to the hilbert basis theorem can be proven for Ritt difference rings:

\begin{theorem}
Let $R$ be a Ritt difference ring and consider the difference polynomial ring $R\{y_1, \ldots, y_n\}$ in $n$ difference variables. Then $R\{y_1, \ldots, y_n\}$ is a Ritt difference ring as well.
\begin{proof} See Theorem 2.5.11 of \cite{levin} \end{proof}
\end{theorem}

A further important analogy of a more geometric nature can be made by generalizing the zariski topology on the spectrum of a ring. 
We call the set of all $\s$-prime ideals of a difference ring $R$ the \emph{$\s$-spectrum} or \emph{difference spectrum} \index{$\s$-spectrum} of $R$, and use the symbol $\Spec^\sigma(R)$ for it.

\begin{defn}
Let $R$ be a difference ring, $F \subseteq R$ a subset. We set $\mathcal{V}(F) := \{ \p \in \Spec^\s(R) \mid F \subseteq \p \}$
\end{defn}

It can be shown that we can define a topology in $\Spec^\s(R)$ by letting a set be closed if and only if it is of the form $\mathcal{V}(F)$ for $F \subseteq R$. 
In fact, this topology is just the restriction of the usual zariski topology on $\Spec(R)$ to $\Spec^\s(R)$.
We call this topology on $\Spec^\s(R)$ the \emph{Cohn topology}\index{Cohn topology}. A few interesting properties of the Cohn topology on $\Spec^\s(R)$ are presented in the folowing Theorem:

\begin{prop}
\begin{itemize}
Let $R$ be a difference ring. Then: 
\item The mapping $$\{ \a \si R \mid \a\text{ perfect }\} \rightarrow \{ A \subseteq \Spec^\s(R) \mid A \text{ closed }\}, \a \mapsto \mathcal{V}(\a)$$
 is bijective and order-reversing.
\item For $F \subseteq R$ it holds that $\mathcal{V}(F)$ is irreducible if and only if $\{F\}$ is prime.
\item $\Spec^\s(R)$ is a quasi-compact topological space. It is noetherian if and only if $R$ is Ritt.
\end{itemize}
\begin{proof} See Propositions 1.2.35 and 3.3.4 of \cite{wibmer} \end{proof}
\end{prop}

In what follows we continue to explore the more geometric aspects of the basic theory of perfect difference ideals.
For this, we will address the analogous concept to affine varieties next. To define these, we will first introduce the following notation:
Let $k$ be a $\s$-field and $k\{y_1,\ldots,y_n\}$ a difference polynomial ring in $n$ variables. Further let $K \supseteq k$ be a $\s$-field extension of $k$ and $F \subseteq k\{y_1,\ldots,y_n\}$.
Then we set $$\VV_K(F) := \{ x \in K^n \mid f(x) = 0 \text{ for all } f \in F \}.$$
With this notation we can define (affine) difference varieties.

\begin{defn}
Let k be a $\s$-field. A functor X from the category of $\s$-field extensions of $k$ to the category of sets is called \emph{$\s$-variety} or \emph{difference variety} \index{$\s$-variety}
 if there exists a subset $F \subseteq k\{y_1,\ldots,y_n\}$ of a $\s$-polynomial ring over $k$ such that $X(K) = \VV_K(F)$ for all $\s$-field extensions $K$ of $k$.
\end{defn}

Since we will only study this concept of difference variety, we will not explicitly reffer to them as affine.

To establish a connection between difference varieties and perfect difference ideals we will introduce a further symbol, which bears much resemblance to the standard definition in algebraic geometry.
For a difference variety $X = \VV(F), F \subseteq k\{y_1,\ldots,y_n\}$ we set 
\begin{align*} \I(X) := \{ f \in k\{y_1,\ldots,y_n \} \mid f(a) = 0 \text{ for all } a \in \VV_K(F) \\ \text{ for all } K \supseteq k ~ \s \text{-field extension} \} \end{align*}

With these concepts and definitions, the analogy can further unfold. As stated before, it can be shown that - in a way - perfect difference ideals are a difference-algebraic generalization of radical ideals. The following result serves to expand on this idea.

\begin{prop}
Let $k$ be a $\s$-field and $F \subseteq k\{y_1,\ldots,y_n\}$. Then 
$$ \I(\VV(F)) = \{F\}$$
\begin{proof}
See Proposition 2.1.11 of \cite{wibmer}
\end{proof}
\end{prop}

A very useful tool in algebraic geometry for studying affine varieties are coordinate rings. The same principle can be applied for difference varieties. Let $X = \VV(F), F \subseteq k\{y_1,\ldots,y_n\}$  be a difference variety.
Then we can associate a \emph{difference coordinate ring} \index{difference coordinate ring} to $X$ by 
defining $$ k\{X\} := k\{y_1,\ldots,y_n\}/\I(X).$$


It can be shown, for example, that the perfect $\s$-ideals of the coordinate ring of a difference variety $X$
are in inclusion-reversing bijection to the $\s$-subvarieties of $X$. We exclude a formal definition of $\s$-subvarities at this point, as it will be treated in the case of mixed ideals later, and the details are basically the same.


Another noteworthy bijection that can be found deals with solutions of difference equations.
Let $k$ be a $\s$-field and $K,L \supseteq k$ be $\s$-field extensions of $k$. Further let $F \subseteq k\{y_1,\ldots,y_n\}$ be a system of difference equations. We say that two solutions of $F$, $a \in K, a' \in L$ (this means that $f(a) = 0 = f(a')$ for all $f \in F$) are equivalent if the mapping $$k\left<a\right> \rightarrow k\left<a'\right>, a \mapsto a'$$ is an isomorphism of $\s$-fields. Here, $k\left< a \right> \subseteq K$ denotes the smallest (with respect to inclusion) $\s$-subfield of $K$ containing $a$, and similarly for $a'$ and $L$.

\begin{prop}
Let $k$ be a $\s$-field and $X = \VV(F)$ a difference variety over $k$. Then the equivalence classes of solutions of $F$
are in bijection to the $\s$-spectrum of the coordinate ring, $\Spec^\s(k\{X\})$.
\begin{proof} See Theorem 2.2.1 of \cite{wibmer}
\end{proof}
\end{prop}

The relationship between $\s$-varieties over a $\s$-field $k$ and their coordinate ring can in fact be indentified well with a category-theoretical result.
It can be shown that for a $\s$-field $k$, the category of $\s$-varieties over $k$ is anti-equivalent to the cateogry of $k$-$\s$-algebras which are perfectly $\s$-reduced and finitely $\s$-generated.

To conclude this brief survey of some of the standard geometric aspects of difference algebra, we will present a final interessting result.

\begin{theorem}\label{irredcomp}
Let $k$ be a $\s$-field and $f \in k\{y_1,\ldots,y_n\}, f \notin k$ an irreducible $\s$-polynomial such that $\operatorname{Eord}(f) = \operatorname{Ord}(f)$. Then $\VV_{\operatorname{Field}}(f) \subset \mathbb{A}_k^n$ has an irreducible component $X$ such that $\s$-$\dim(X) = n-1$ and $\s$-$\operatorname{deg}(X) = \operatorname{Ord}(f)$.
\begin{bew}
See Theorem 5.2.14 of \cite{wibmer}.
\end{bew}
\end{theorem}
